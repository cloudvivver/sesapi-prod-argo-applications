apiVersion: v1
kind: ConfigMap
metadata:
  name: env
  namespace: c-tv
  labels:
    io.kompose.service: c-tv-env
    app.kubernetes.io/name: c-tv
    app.kubernetes.io/component: config
data:
  # ============================================================
  # CONFIGURAÇÕES DA APLICAÇÃO C-TV
  # ============================================================

  # Application Environment
  CTV_ENV: "prod"
  CTV_SSL: "FALSE"  # Ingress faz TLS termination, backend usa HTTP
  CTV_PORT: "8080"

  # Server Configuration
  HTTP_READ_TIMEOUT: "30s"
  HTTP_WRITE_TIMEOUT: "30s"
  HTTP_IDLE_TIMEOUT: "60s"

  # ============================================================
  # CACHE CONFIGURATION (EFS - Cache Compartilhado entre Pods)
  # ============================================================

  # Cache em arquivo usando EFS (compartilhado via ReadWriteMany)
  CACHE_DIRECTORY: "/app/audio_cache"     # Montado do EFS via PVC c-tv-efs-cache
  CACHE_TTL_MINUTES: "10080"              # 7 dias de retenção
  CACHE_MAX_SIZE_MB: "10240"              # 10GB máximo de cache

  # Desabilitar backends alternativos (usar apenas file cache no EFS)
  CACHE_BACKEND: "file"
  CACHE_MEMORY_ENABLED: "false"
  S3_CACHE_ENABLED: "false"

  API_URL: "https://c-tv.saude.pi.gov.br"

  # TTS Configuration
  TTS_PROVIDER: "polly"  # AWS Polly TTS
  TTS_VOICE: "Camila"    # Voz neural pt-BR feminina (alta qualidade)
  TTS_RATE: "medium"
  TTS_PITCH: "medium"

  # ============================================================
  # AWS POLLY CONFIGURATION
  # ============================================================
  AWS_REGION: "sa-east-1"
  # AWS credentials via IRSA (IAM Roles for Service Accounts)
  # Configurado via serviceAccountName: c-tv-polly no deployment

  # ============================================================
  # AUDIO & LOGGING
  # ============================================================
  AUDIO_FORMAT: "mp3"
  AUDIO_SAMPLE_RATE: "22050"
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # ============================================================
  # HEALTH CHECK & MONITORING
  # ============================================================
  HEALTH_CHECK_ENDPOINT: "/health"
  FIXED_HOST: "c-tv.saude.pi.gov.br"

  # ============================================================
  # SENTRY ERROR TRACKING
  # ============================================================
  SENTRY_DSN: "https://fdeb263e6ac5905a26c7bddebe432a4e@sentry.bigdatasys.net/27"